<html>
<head>
</head>
<body style="background: transparent;">
    <script src="scripts/docstrap.lib.js"></script>
    <script src="scripts/lunr.min.js"></script>
    <script src="scripts/fulltext-search.js"></script>

    <script type="text/x-docstrap-searchdb">
    {"global.html":{"id":"global.html","title":"Global","body":" Documentation Modules Admin ControllerBusiness ControllerBusiness Operator Controller Global addTokenToClientaddTokenToUseraddUserTypecancelReservationcheckAgecheckAvailablecheckMinMaxcreateReservationdeleteTokenFromUserduplicateReservationfindActivityforgetPasswordgenerateTokengetClientgetResetPasswordmakeReservationpostResetPasswordregisterrequestEmailVerificationsendPasswordResetSuccessMailsendTokenByMailsendVerificationSuccessMailsetReservationDateshowupdateupdateSlotverifyEmailverifyTokenFromClientviewActivitiesviewActivitiesOfABusinessviewPromotionsviewPromotionsOfABusinessviewPromotionsOfAnActivityviewReservations Global Members addUserType adds userType to req header cancelReservation Cancels a certain reservation forgetPassword 2.3 Process forget password request as follows: 1. generate random token 2. add token to requesting user 3. send token by mail to the user getClient Gets the client from the userId getResetPassword Checks the password reset token sent by the user makeReservation Creates a new Reservation instance and returns success/failure message postResetPassword updates user's password as follows: 1. verifies token, deletes it from user model and updates password 2. send confirmation mail after updating password register register new client requestEmailVerification Sends email verification token to client: 1. generate random token 2. add token to client 3. send token by mail to the client update Update Client's info update 2.4 Updates user information verifyEmail Verify Client email as follows: 1. Verify that the token belongs to a client and change client to verified 2. send a success email to the Client viewActivitiesOfABusiness Finds activities related to a certian business viewPromotionsOfABusiness Finds promotions related to a certian business Author: ameniawy viewPromotionsOfAnActivity Finds promotions related to a certian activity Author: ameniawy viewReservations Gets all reservations of a client Methods addTokenToClient() Saves the email verification token to the client Parameters: Name Type Description req.body.token String addTokenToUser() Saves the password reset token to the user Parameters: Name Type Description req.body.token String checkAge() Checks that the min age is not violated for this activity checkAvailable() check if the requested participants fit in the chosen slot checkMinMax() Check that the min and max number of participants is not violated createReservation() Creates reservation with the passed parameters. deleteTokenFromUser() Verifies the token sent by the user and deletes the token from the user in the DB Parameters: Name Type Description req.params.token String duplicateReservation() Checks if the reservation was already made with the same exact attributes. findActivity() Finds activity requested for this reservation generateToken() generates token for email verification and adds it to the request body generateToken() generates token for password reset and adds it to the request body sendPasswordResetSuccessMail() Sends confirmation email Parameters: Name Type Description req.body.user.email string sendTokenByMail() Send the token to the email in the request Parameters: Name Type Description req.body.user.email String req.body.token String Returns: { errors: [errors], msg :String, data: [{clientObject}] } Type json sendTokenByMail() Send the token to the email in the request Parameters: Name Type Description req.body.user.email String req.body.token String sendVerificationSuccessMail() Sends confirmation email Parameters: Name Type Description req.body.user.email string Returns: { errors: [errors], msg :String, data: [{userObject}, {clientObject}] } Type json setReservationDate() Sets the date to be inserted into the reservation show(req, res, next) Show full details of a specific activity. Parameters: Name Type Description req Request res Response next function show(req, res, next) Show full details of a specific client. Parameters: Name Type Description req Request res Response next function updateSlot() Updates the currentParticipants of the chosen slot verifyTokenFromClient() Verifies the token sent by the user and deletes the token from the Client in the DB Parameters: Name Type Description req.params.token String viewActivities() Returns: array of all activities viewPromotions() Returns: array of all promotions × Search results Close Documentation generated by JSDoc 3.4.3 on 2017-04-16T01:48:50+02:00 using the DocStrap template. "},"modules.list.html":{"id":"modules.list.html","title":"Modules","body":" Documentation Modules Admin ControllerBusiness ControllerBusiness Operator Controller Global addTokenToClientaddTokenToUseraddUserTypecancelReservationcheckAgecheckAvailablecheckMinMaxcreateReservationdeleteTokenFromUserduplicateReservationfindActivityforgetPasswordgenerateTokengetClientgetResetPasswordmakeReservationpostResetPasswordregisterrequestEmailVerificationsendPasswordResetSuccessMailsendTokenByMailsendVerificationSuccessMailsetReservationDateshowupdateupdateSlotverifyEmailverifyTokenFromClientviewActivitiesviewActivitiesOfABusinessviewPromotionsviewPromotionsOfABusinessviewPromotionsOfAnActivityviewReservations Modules × Search results Close Documentation generated by JSDoc 3.4.3 on 2017-04-16T01:48:51+02:00 using the DocStrap template. "},"index.html":{"id":"index.html","title":"Index","body":" Documentation Modules Admin ControllerBusiness ControllerBusiness Operator Controller Global addTokenToClientaddTokenToUseraddUserTypecancelReservationcheckAgecheckAvailablecheckMinMaxcreateReservationdeleteTokenFromUserduplicateReservationfindActivityforgetPasswordgenerateTokengetClientgetResetPasswordmakeReservationpostResetPasswordregisterrequestEmailVerificationsendPasswordResetSuccessMailsendTokenByMailsendVerificationSuccessMailsetReservationDateshowupdateupdateSlotverifyEmailverifyTokenFromClientviewActivitiesviewActivitiesOfABusinessviewPromotionsviewPromotionsOfABusinessviewPromotionsOfAnActivityviewReservations × Search results Close Documentation generated by JSDoc 3.4.3 on 2017-04-16T01:48:51+02:00 using the DocStrap template. "},"module-Admin%20Controller.html":{"id":"module-Admin%20Controller.html","title":"Module: Admin Controller","body":" Documentation Modules Admin ControllerBusiness ControllerBusiness Operator Controller Global addTokenToClientaddTokenToUseraddUserTypecancelReservationcheckAgecheckAvailablecheckMinMaxcreateReservationdeleteTokenFromUserduplicateReservationfindActivityforgetPasswordgenerateTokengetClientgetResetPasswordmakeReservationpostResetPasswordregisterrequestEmailVerificationsendPasswordResetSuccessMailsendTokenByMailsendVerificationSuccessMailsetReservationDateshowupdateupdateSlotverifyEmailverifyTokenFromClientviewActivitiesviewActivitiesOfABusinessviewPromotionsviewPromotionsOfABusinessviewPromotionsOfAnActivityviewReservations Module: Admin Controller The controller that is responsible of handling admin's requests × Search results Close Documentation generated by JSDoc 3.4.3 on 2017-04-16T01:48:51+02:00 using the DocStrap template. "},"module-Business%20Controller.html":{"id":"module-Business%20Controller.html","title":"Module: Business Controller","body":" Documentation Modules Admin ControllerBusiness ControllerBusiness Operator Controller Global addTokenToClientaddTokenToUseraddUserTypecancelReservationcheckAgecheckAvailablecheckMinMaxcreateReservationdeleteTokenFromUserduplicateReservationfindActivityforgetPasswordgenerateTokengetClientgetResetPasswordmakeReservationpostResetPasswordregisterrequestEmailVerificationsendPasswordResetSuccessMailsendTokenByMailsendVerificationSuccessMailsetReservationDateshowupdateupdateSlotverifyEmailverifyTokenFromClientviewActivitiesviewActivitiesOfABusinessviewPromotionsviewPromotionsOfABusinessviewPromotionsOfAnActivityviewReservations Module: Business Controller The controller that is responsible of handling admin's requests Members &lt;static&gt; addActivity &lt;static&gt; addTiming &lt;static&gt; createPromotion 5.6 A function responsible for creating a new Promotion. &lt;static&gt; removeTiming &lt;static&gt; update Update Business's info &lt;static&gt; viewMyPromotions views a list of Promotions offered by the business Methods &lt;static&gt; addBusiness() Parameters: Name Type Description req.user &lt;static&gt; addType(email,username,) A function responsible for register a new business operator. Parameters: Name Type Description email,username, password, confirmPassword &lt;static&gt; create(user) a function responsible for creating a new business operator this gets called from the User.register Parameters: Name Type Description user &lt;static&gt; delete() A function responsible for deleting a business. &lt;static&gt; editActivity() updates the details of *one* activity that belongs to the business Parameters: Name Type Description req.body.activityId,req.body.business Returns: &lt;static&gt; editPromotion(promotionId,) 5.7 A function responsible for editing a Promotion. Parameters: Name Type Description promotionId, activityId, discountValue, details &lt;static&gt; removeActivity() Returns: &lt;static&gt; removePromotion(promotionId) 5.8 A function responsible for removing a Promotion. Parameters: Name Type Description promotionId &lt;static&gt; show(req, res, next) Show full details of a specific business. Parameters: Name Type Description req Request res Response next function &lt;static&gt; viewBusinesses() Returns: × Search results Close Documentation generated by JSDoc 3.4.3 on 2017-04-16T01:48:51+02:00 using the DocStrap template. "},"module-Business%20Operator%20Controller.html":{"id":"module-Business%20Operator%20Controller.html","title":"Module: Business Operator Controller","body":" Documentation Modules Admin ControllerBusiness ControllerBusiness Operator Controller Global addTokenToClientaddTokenToUseraddUserTypecancelReservationcheckAgecheckAvailablecheckMinMaxcreateReservationdeleteTokenFromUserduplicateReservationfindActivityforgetPasswordgenerateTokengetClientgetResetPasswordmakeReservationpostResetPasswordregisterrequestEmailVerificationsendPasswordResetSuccessMailsendTokenByMailsendVerificationSuccessMailsetReservationDateshowupdateupdateSlotverifyEmailverifyTokenFromClientviewActivitiesviewActivitiesOfABusinessviewPromotionsviewPromotionsOfABusinessviewPromotionsOfAnActivityviewReservations Module: Business Operator Controller The controller that is responsible of handling admin's requests Methods &lt;static&gt; show(req, res, next) Show full details of a specific business operator. Parameters: Name Type Description req Request res Response next function × Search results Close Documentation generated by JSDoc 3.4.3 on 2017-04-16T01:48:51+02:00 using the DocStrap template. "}}
    </script>

    <script type="text/javascript">
        $(document).ready(function() {
            Searcher.init();
        });

        $(window).on("message", function(msg) {
            var msgData = msg.originalEvent.data;

            if (msgData.msgid != "docstrap.quicksearch.start") {
                return;
            }

            var results = Searcher.search(msgData.searchTerms);

            window.parent.postMessage({"results": results, "msgid": "docstrap.quicksearch.done"}, "*");
        });
    </script>
</body>
</html>
